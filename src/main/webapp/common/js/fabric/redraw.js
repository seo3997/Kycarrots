!function(t){function e(n){if(o[n])return o[n].exports;var i=o[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}([function(t,e,o){o(13),o(3),o(14),o(4),o(15),o(5),o(16),o(6),o(17),o(7),o(18),o(8),o(19),o(9),t.exports=o(20)},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={TOOL:{ARROW:"arrow",DELETE:"delete",HORIZONTAL_LINE:"horizontalLine",PIXELATE:"pixelate",RECTANGLE:"rectangle",RESET:"reset",TEXT:"text"},DEFAULT_COLOR:"#33e",DEFAULT_ACTIVE_COLOR:"#55f",CSS:{ACTIVE_BUTTON:"active",DISABLED_BUTTON:"disabled",BUTTON:"redraw-btn",PARENT:"redraw-parent",TOOLBAR:"redraw-toolbar",CANVAS_WRAPPER:"redraw-canvas"}}},function(t,e){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),i="undefined"!=typeof window,a=function(){function t(){o(this,t),this.document=i?document:{},this.window=i?window:{}}return n(t,null,[{key:"appendToWindow",value:function(t,e){return!!i&&(window[t]=e,!0)}},{key:"getFromWindow",value:function(t){return window?window[t]:{getFromWindow:function(){},tools:[]}}}]),t}();e.default=a},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),s=o(1),r=n(s),l=void 0,c=function(){function t(e,o,n){i(this,t);var a=this;this.eventAggregator=o,this.canvasWrapper=e,this.arrow=void 0,this.canvas=void 0,this.start=void 0,this.end=void 0,this.options=n,this.eventAggregator.subscribeTo(r.default.TOOL.ARROW,"ArrowTool",function(){a.initListeners.apply(a,arguments)}),this.canvas=e.canvas,this.moveFn=function(t){a.onMove(t)},this.downFn=function(t){a.onMouseDown(t)},this.upFn=function(t){a.onMUP(t)},this.notify=function(t){a.eventAggregator.notify("TOOL_USAGE",r.default.TOOL.ARROW,t)},this.done=function(){a.canvasWrapper.enableSelection(!0),a.removeCanvasListeners(),a.notify("inactive")}}return a(t,[{key:"moveArrowIndicator",value:function(t){var e=t[0],o=t[1],n=t[2],i=t[3],a=n-e,s=i-o,r=Math.atan2(s,a);r*=180/Math.PI,r+=90,this.arrow&&this.canvas.remove(this.arrow),this.arrow=new fabric.Triangle({angle:r,fill:this.options.activeColor,top:i,left:n,height:this.options.size,width:this.options.size,originX:"center",originY:"center",selectable:!1}),this.canvas.add(this.arrow)}},{key:"abort",value:function(){this.arrow&&(this.canvas.remove(this.arrow),this.arrow=void 0),l&&(this.canvas.remove(l),l=void 0),this.eventAggregator.unsubscribeTo("keydown","ArrowTool"),this.done()}},{key:"onMove",value:function(t){if(this.start&&!this.end&&l){var e=this.canvas.getPointer(t.e);l.set({x2:e.x,y2:e.y}),this.moveArrowIndicator([this.start.left,this.start.top,e.x,e.y])}this.canvas.renderAll()}},{key:"onMUP",value:function(t){var e=this.canvas.getPointer(t.e);this.end={top:e.y,left:e.x};var o=Math.abs(this.end.top-this.start.top)+Math.abs(this.end.left-this.start.left);if(o>10){this.arrow&&(this.arrow.fill=this.options.color);var n=new fabric.Group([l,this.arrow],{hasControls:!1,hasBorders:!0,selectable:!1,fill:this.options.color});l.stroke=this.options.color,this.canvas.add(n)}this.canvas.remove(l),this.canvas.remove(this.arrow),this.arrowd=void 0,l=void 0,this.startd=void 0,this.end=void 0,this.canvas.renderAll()}},{key:"onMouseDown",value:function(t){var e=this.canvas.getPointer(t.e);this.start={top:e.y,left:e.x},l=new fabric.Line([this.start.left,this.start.top,this.start.left,this.start.top],{strokeWidth:this.options.lineWidth,stroke:this.options.activeColor,originX:"center",originY:"center",hasControls:!1,hasBorders:!0,selectable:!0}),this.canvas.add(l)}},{key:"initListeners",value:function(t,e,o){var n=this;return"toolbar-deactivate"===o?void this.abort():(this.eventAggregator.subscribeTo("keydown","ArrowTool",function(t,e,o){27===o&&n.abort.apply(n)}),this.start=void 0,this.end=void 0,this.canvasWrapper.enableSelection(!1),this.notify("active"),this.canvas.on("mouse:down",this.downFn),this.canvas.on("mouse:move",this.moveFn),void this.canvas.on("mouse:up",this.upFn))}},{key:"removeCanvasListeners",value:function(){this.canvas.off("mouse:down",this.downFn),this.canvas.off("mouse:move",this.moveFn),this.canvas.off("mouse:up",this.upFn)}}]),t}();e.default=c},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=o(1),s=n(a),r=function t(e,o){i(this,t),o.notify("tool-enabled",s.default.TOOL.DELETE,!1);var n=function(){var t=e.canvas;t.getActiveObject()&&t.remove(t.getActiveObject()),o.notify("TOOL_USAGE",s.default.TOOL.DELETE,"inactive")};o.subscribeTo(s.default.TOOL.DELETE,"DeleteTool",n),o.subscribeTo("keydown","DeleteTool",function(t,e,o){8!==o&&46!==o||n()}),e.canvas.on("object:selected",function(){o.notify("tool-enabled",s.default.TOOL.DELETE,!0)}),e.canvas.on("selection:cleared",function(){o.notify("tool-enabled",s.default.TOOL.DELETE,!1)})};e.default=r},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=o(1),s=n(a),r=function t(e,o,n){function a(t){o.notify("TOOL_USAGE",s.default.TOOL.HORIZONTAL_LINE,t)}function r(){return new fabric.Line([0,0,c.width,0],{left:0,top:1,hasControls:!1,lockMovementX:!0,opacity:.7,padding:4,stroke:n.color,strokeWidth:2})}function l(t,e,n){function i(){c.remove(u),u=void 0,s(),a("inactive")}function s(){c.off("mouse:move",l),c.off("mouse:up",f)}if("toolbar-click"!==n)return void i();a("active"),u=r(),c.add(u),o.subscribeTo("keydown","HorizontalLine",function(t,e,o){27===o&&i()});var l=function(t){u&&(u.set({top:c.getPointer(t.e).y}),u.setCoords(),c.renderAll())};c.on("mouse:move",l);var f=function(){u=r(),c.add(u)};c.on("mouse:up",f)}i(this,t);var c=e.canvas,u=void 0;o.subscribeTo(s.default.TOOL.HORIZONTAL_LINE,"HorizontalLineTool",l)};e.default=r},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=o(1),s=n(a),r=function t(e,o,n){function a(t){o.notify("TOOL_USAGE",s.default.TOOL.PIXELATE,t)}function r(t){var e=b.getPointer(t.e),o=void 0,n=void 0,i=e.x-p,a=e.y-h;n=i<0?e.x:p,o=a<0?e.y:h,d.set({top:o,left:n,width:Math.abs(i),height:Math.abs(a)}),d.setCoords(),b.renderAll()}function l(t){var e=b.getPointer(t.e);h=e.y,p=e.x,d=new fabric.Rect({left:p,top:h,width:4,borderColor:n.activeColor,height:4,fill:n.activeColor,opacity:n.activeOpacity,hasControls:!0,hasRotatingPoint:!1,originX:"left",originY:"top",selectable:!1}),b.add(d),d.setCoords(),b.renderAll(),b.on("mouse:move",r),b.on("mouse:up",y)}function c(){b.off("mouse:down",l),b.off("mouse:move",r),b.off("mouse:up",y),d=void 0,o.unsubscribeTo("keydown","PixelateTool")}function u(){a("inactive"),c(),e.enableSelection(!0)}function f(t,n,i){return"toolbar-deactivate"===i?void u():(o.subscribeTo("keydown","PixelateTool",function(t,e,o){27===o&&u()},v),e.enableSelection(!1),a("active"),void b.on("mouse:down",l))}i(this,t);var d=void 0,v=this,h=void 0,p=void 0,b=e.canvas;o.subscribeTo(s.default.TOOL.PIXELATE,"PixelateTool",f);var T=function(t,e,o){o.filters[t]=e,o.applyFilters(b.renderAll.bind(b))},y=function t(o){b.off("mouse:move",r),b.off("mouse:up",t),b.remove(d);var i=b.getPointer(o.e),a=i.x-p,s=i.y-h;if(Math.abs(a)>0&&Math.abs(s)>0){var l=fabric.util.object.clone(e.image),c=new Image;c.src=l.toDataURL({left:d.left,top:d.top,width:d.width,height:d.height});var u=d;c.onload=function(){var t=new fabric.Image(c);t.set({left:u.left,top:u.top,width:u.width,height:u.height,hasControls:!1,lockMovementX:!0,lockMovementY:!0});var e=fabric.Image.filters;T(0,new e.Pixelate({blocksize:n.blocksize}),t),t.setCoords(),b.add(t),b.sendToBack(t),b.renderAll()}}b.renderAll(),d=void 0}};e.default=r},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=o(1),s=n(a),r=void 0,l=function t(e,o,n){function a(t){o.notify("TOOL_USAGE",s.default.TOOL.RECTANGLE,t)}function l(){a("inactive"),u(),e.enableSelection(!0)}function c(t){var e=y.getPointer(t.e),o=void 0,n=void 0,i=e.x-b,a=e.y-p;h=Math.abs(a),v=Math.abs(i),n=i<0?e.x:b,o=a<0?e.y:p,r.set({top:o,left:n,width:v,height:h}),r.setCoords(),y.renderAll()}function u(){y.off("mouse:down",f),y.off("mouse:move",c),y.off("mouse:up",m),r=void 0,o.unsubscribeTo("keydown","RectangleTool")}function f(t){var e=y.getPointer(t.e);v=0,h=0,p=e.y,b=e.x,r=new fabric.Rect({left:b,top:p,width:4,borderColor:n.activeColor,height:4,fill:n.activeColor,opacity:n.activeOpacity,hasControls:!0,hasRotatingPoint:!1,originX:"left",originY:"top",selectable:!1}),y.add(r),r.setCoords(),y.renderAll(),y.on("mouse:move",c),y.on("mouse:up",m)}function d(t,n,i){return"toolbar-deactivate"===i?void l():(o.subscribeTo("keydown","RectangleTool",function(t,e,o){27===o&&l()},T),e.enableSelection(!1),a("active"),void y.on("mouse:down",f))}i(this,t);var v=void 0,h=void 0,p=void 0,b=void 0,T=this,y=e.canvas;o.subscribeTo(s.default.TOOL.RECTANGLE,"RectangleTool",d);var m=function t(){return y.off("mouse:move",c),y.off("mouse:up",t),Math.abs(v)<5&&Math.abs(h)<5?void y.remove(r):(r.set({borderColor:n.color,fill:n.color,opacity:n.opacity}),void y.renderAll())}};e.default=l},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=o(1),s=n(a),r=function t(e,o){function n(t,e,n){"toolbar-deactivate"!==n&&window.confirm("This will restore your image to its default state.\nAll your modifications will be deleted.\nDo you want to continue?")&&a(),o.notify("TOOL_USAGE",s.default.TOOL.RESET,"inactive")}function a(){for(var t=e.canvas,o=t.getObjects(),n=o.length-1;n>=0;n-=1)t.remove(o[n])}i(this,t),o.subscribeTo(s.default.TOOL.RESET,"ResetTool",n)};e.default=r},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=o(1),s=n(a),r=function t(e,o,n){function a(t){o.notify("TOOL_USAGE",s.default.TOOL.TEXT,t)}function r(){u&&(c.remove(u),u=void 0,a("inactive"))}function l(t,e,o){function i(){u&&(u.set({fill:n.color}),c.off("mouse:move",s),c.off("mouse:up",i),u.setCoords(),u=void 0,c.renderAll(),a("inactive"))}if("toolbar-click"!==o)return void r();a("active"),u=new fabric.IText("Click to leave a comment",{fontFamily:n.fontFamily,fontSize:n.fontSize,left:100,top:-40,fill:n.activeColor,hasControls:!1}),c.add(u);var s=function(t){if(u){var e=c.getPointer(t.e);u.set({top:e.y,left:e.x}),u.setCoords(),c.renderAll()}};c.on("mouse:move",s),c.on("mouse:up",i)}i(this,t);var c=e.canvas,u=void 0;o.subscribeTo(s.default.TOOL.TEXT,"TextTool",l),o.subscribeTo("keydown","TextTool",function(t,e,o){27===o&&r()})};e.default=r},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),s=o(1),r=n(s),l=function(){function t(e,o,n){i(this,t),this.options=n,this.eventAggregator=o;var a=e.parentNode,s=document.createElement("div");s.className=r.default.CSS.PARENT,this.scale=1,a.insertBefore(s,e),a.removeChild(e);var l=document.createElement("canvas"),c=document.createElement("div");c.className=r.default.CSS.CANVAS_WRAPPER,c.appendChild(l),s.appendChild(c),this.canvasElem=l,this.canvasContainer=s,this.canvasLeft=l.offsetLeft,this.canvas=new fabric.Canvas(l),this.imgElement=e;var u=this,f=function(){u.setupImage()},d=new Image;d.addEventListener("load",f,!1),d.src=this.imgElement.src}return a(t,[{key:"setupImage",value:function(){function t(t){return function(){t.renderAll(),n.notify("canvas-loaded","CANVAS")}}var e=this;if(this.image=new fabric.Image(this.imgElement),this.options.maxWidth&&this.options.maxWidth<this.image.width&&(this.scale=this.options.maxWidth/this.image.width),this.options.maxHeight&&this.options.maxHeight<this.image.height){var o=this.options.maxHeight/this.image.height;this.scale>o&&(this.scale=o)}this.width=this.scale*this.imgElement.width,this.height=this.scale*this.imgElement.height,this.canvas.setDimensions({width:this.width,height:this.height}),this.image.setScaleX(this.scale),this.image.setScaleY(this.scale);var n=this.eventAggregator;if(this.canvas.setBackgroundImage(this.image,t(this.canvas),{}),this.options.maxWidth&&this.options.maxWidth<this.image.width&&(this.scale=this.options.maxWidth/this.image.width),this.options.maxHeight&&this.options.maxHeight<this.image.height){var i=this.options.maxHeight/this.image.height;this.scale>i&&(this.scale=i)}this.eventAggregator.subscribeTo("TOOL_USAGE","toolbar",function(t,o,n){"active"===n?e.canvas.defaultCursor="crosshair":e.canvas.defaultCursor="default"},this)}},{key:"loadFromJSON",value:function(t){this.canvas.clear(),this.canvas.loadFromJSON(t,this.canvas.renderAll.bind(this.canvas))}},{key:"getCanvasTop",value:function(){return this.canvasContainer.offsetTop}},{key:"getAllObjects",value:function(){return this.canvas.getObjects()}},{key:"enableSelection",value:function(t){this.canvas.selection=t,this.canvas.forEachObject(function(e){e.selectable=t})}}]),t}();e.default=l},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(e){var o=e.split(" ");o.forEach(function(e){t.classList.add(e)})}}Object.defineProperty(e,"__esModule",{value:!0});var s=o(1),r=n(s),l=function t(e,o){function n(t){return function(){l&&e.notify(l,"toolbar","toolbar-deactivate"),l!==t?(l=t,e.notify(t,"toolbar","toolbar-click")):l=void 0}}var s=this;i(this,t),this.toolsInUse={};var l=void 0;this.cancelActiveTool=function(){l&&(e.notify(l,"toolbar","toolbar-deactivate"),l=void 0)};var c=function(t){8!==t.keyCode&&13!==t.keyCode&&27!==t.keyCode&&46!==t.keyCode||e.notify("keydown","toolbar",t.keyCode)};window.addEventListener("keydown",c,!1),this.setupTools=function(t,i,c){var u=document.createElement("div");a(u,r.default.CSS.TOOLBAR),a(u,o.toolbarClass),c.toolbarFirst===!0?i.insertBefore(u,i.firstChild):i.appendChild(u),Object.keys(t).forEach(function(e){var o=document.createElement("button");o.innerHTML=t[e].options.label,o.classList.add(r.default.CSS.BUTTON),a(o,c.buttonClass),a(o,t[e].options.buttonClass),o.onclick=n(t[e].address),s.toolsInUse[t[e].address]=o,u.appendChild(o)});var f=c.buttonActiveClass||r.default.CSS.ACTIVE_BUTTON,d=c.buttonDisabledClass||r.default.CSS.DISABLED_BUTTON;e.subscribeTo("TOOL_USAGE","toolbar",function(t,e,o){var n=s.toolsInUse[e];"active"!==o?(e===l&&(l=void 0),n.classList.remove(f)):n.classList.add(f)},s),e.subscribeTo("tool-enabled","toolbar",function(t,e,o){o?s.toolsInUse[e].classList.remove(d):s.toolsInUse[e].classList.add(d)},s)}};e.default=l},function(t,e){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),i=function(){function t(){o(this,t),this.subscriptionsByTopic={}}return n(t,[{key:"subscribeTo",value:function(t,e,o,n){this.subscriptionsByTopic[t]||(this.subscriptionsByTopic[t]=[]),this.subscriptionsByTopic[t].push({subscriber:e,callbackFn:o,invokationScope:n})}},{key:"unsubscribeTo",value:function(t,e){var o=this;Object.keys(this.subscriptionsByTopic[t]).forEach(function(n){o.subscriptionsByTopic[t][n].subscriber===e&&o.subscriptionsByTopic[t].splice(n,1)})}},{key:"notify",value:function(t,e,o){var n=this;this.subscriptionsByTopic[t]&&Object.keys(this.subscriptionsByTopic[t]).forEach(function(i){var a=void 0;n.subscriptionsByTopic[t][i].invokationScope&&(a=n.subscriptionsByTopic[t][i].invokationScope),n.subscriptionsByTopic[t][i].callbackFn.apply(a,[t,e,o])})}}]),t}();e.default=i},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t){for(var e=atob(t.split(",")[1]),o=[],n=0;n<e.length;n+=1)o.push(e.charCodeAt(n));return new Blob([new Uint8Array(o)],{type:"image/png"})}function s(t,e){if(e&&e.tools){var o={};return Object.keys(e.tools).forEach(function(n){var i=e.tools[n];o[i]=t[i]}),o}return t}function r(t,e,o,n){var i={};return Object.keys(t[n].options).forEach(function(a){Object.prototype.hasOwnProperty.call(t[n].options,a)&&(e&&e[n]&&Object.prototype.hasOwnProperty.call(e[n],a)?i[a]=e[n][a]:y.indexOf(a)>-1&&Object.prototype.hasOwnProperty.call(o,a)?i[a]=o[a]:i[a]=t[n].options[a])}),i}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),c=o(2),u=n(c),f=o(10),d=n(f),v=o(12),h=n(v),p=o(11),b=n(p),T={tools:{}},y=["color","activeColor"],m=function(){function t(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this.events=new h.default,this.canvasWrapper=new d.default(e,this.events,o),o.jsonContent&&this.canvasWrapper.loadFromJSON(o.jsonContent),this.controls=this.initializeTools(this.events,o)}return l(t,[{key:"getDataUrlForExport",value:function(){return this.canvasWrapper.canvas.deactivateAllWithDispatch(),this.canvasWrapper.canvas.toDataURL({format:"png",multiplier:1/this.canvasWrapper.scale})}},{key:"toBase64URL",value:function(){return this.getDataUrlForExport()}},{key:"toDataBlob",value:function(){return a(this.getDataUrlForExport())}},{key:"toJson",value:function(t){this.controls.cancelActiveTool();var e=this.canvasWrapper.canvas.toObject(["lockMovementX","lockMovementY","lockRotation","lockScalingX","lockScalingY","lockUniScaling","hasControls","hasRotatingPoint","selectable","fill","padding"]);return t||delete e.backgroundImage,JSON.stringify(e)}},{key:"fromJson",value:function(t){this.canvasWrapper.loadFromJSON(t)}},{key:"isEmpty",value:function(){return 0===this.canvasWrapper.getAllObjects().length}},{key:"isDirty",value:function(){return!0}},{key:"getCanvas",value:function(){return this.canvasWrapper.canvas}},{key:"on",value:function(t,e,o,n){this.events.subscribeTo(t,"cx-"+o,e,n)}},{key:"off",value:function(t,e){this.events.unsubscribeTo(t,"cx-"+e)}},{key:"initializeTools",value:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s(T.tools,o);Object.keys(n).forEach(function(n){var i=r(T.tools,o.toolSettings,o,n);T.tools[n].options=i,new T.tools[n].toolFn(e.canvasWrapper,t,i)});var i=new b.default(t,o);return i.setupTools(n,this.canvasWrapper.canvasContainer,o),i}}]),t}(),g={},O=function(){function t(){i(this,t)}return l(t,[{key:"registerTool",value:function(t,e,o){this.tools||(this.tools=[]),this.tools[t]={address:t,toolFn:e,options:o},this.tools[t].options.buttonClass=T.tools[t].options.buttonClass||""}}],[{key:"getInstance",value:function(){return g.redraw||(g.authService=new t),g.authService}}]),t}();e.default=O,T.Annotation=m,T.registerTool=function(t,e,o){T.tools[t]={address:t,toolFn:e,options:o},T.tools[t].options.buttonClass=T.tools[t].options.buttonClass||""},u.default.appendToWindow("redraw",T)},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var i=o(1),a=n(i),s=o(2),r=n(s),l=o(3),c=n(l),u={label:"Arrow",color:a.default.DEFAULT_COLOR,activeColor:a.default.DEFAULT_ACTIVE_COLOR,size:15,lineWidth:4};r.default.getFromWindow("redraw").registerTool(a.default.TOOL.ARROW,c.default,u)},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var i=o(1),a=n(i),s=o(2),r=n(s),l=o(4),c=n(l),u={label:"Delete"};r.default.getFromWindow("redraw").registerTool(a.default.TOOL.DELETE,c.default,u)},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var i=o(1),a=n(i),s=o(2),r=n(s),l=o(5),c=n(l),u={label:"Horizontal Line",color:a.default.DEFAULT_COLOR,activeColor:a.default.DEFAULT_ACTIVE_COLOR};r.default.getFromWindow("redraw").registerTool(a.default.TOOL.HORIZONTAL_LINE,c.default,u)},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var i=o(1),a=n(i),s=o(2),r=n(s),l=o(6),c=n(l),u={label:"Pixelate",activeColor:a.default.DEFAULT_ACTIVE_COLOR,activeOpacity:.3,blocksize:8};r.default.getFromWindow("redraw").registerTool(a.default.TOOL.PIXELATE,c.default,u)},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var i=o(1),a=n(i),s=o(2),r=n(s),l=o(7),c=n(l),u={label:"Rectangle",color:a.default.DEFAULT_COLOR,activeColor:a.default.DEFAULT_ACTIVE_COLOR,opacity:.5,activeOpacity:.3};r.default.getFromWindow("redraw").registerTool(a.default.TOOL.RECTANGLE,c.default,u)},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var i=o(1),a=n(i),s=o(2),r=n(s),l=o(8),c=n(l),u={label:"Reset"};r.default.getFromWindow("redraw").registerTool(a.default.TOOL.RESET,c.default,u)},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var i=o(1),a=n(i),s=o(2),r=n(s),l=o(9),c=n(l),u={label:"Text",fontFamily:"arial",fontSize:18,color:a.default.DEFAULT_COLOR,activeColor:a.default.DEFAULT_ACTIVE_COLOR};r.default.getFromWindow("redraw").registerTool(a.default.TOOL.TEXT,c.default,u)}]);